# STM32位带操作

![16669608693769](assets/16669608693769.jpg)

## 1.位带介绍

### （1）位带操作

在51时使用过位操作，例如使用`sbit`对单片机IO口的定义，但是STM32中并没有这类关键字，而是通过访问位带别名区来实现

即通过将每个比特位膨胀成一个32位字，当访问这些字的时候就达到了访问比特的目的

### （2）STM32位带及位带别名区域

支持位带操作的区域是`SRAM`区的最低	1MB 范围和片内外设区的最低	1MB	范围

位带别名区，`SRAM`区的32MB，==片内外设区（APB1、APB2、AHB1）的32MB==（使用较多）

##2.STM32位带及位带别名区

### 1.外设位带区与外设位带别名区的地址转换公式

~~~
AliasAddr = 0x4200 0000 + (A - 0x4000 0000)*8*4 + n*4
最终地址 = 外设位带别名区起始地址 + (A - 外设位带区起始地址) * 32 + 位序号 * 4
32是因为一个位膨胀成32个位的字
4是因为一个寄存器有8个位，膨胀成32位后，每一个位在外设别名区都要占4个位
~~~

###2.SRAM位带区与SRAM位带别名区的地址转换公式

~~~
AliasAddr = 0x2200 0000 + (A - 0x2000 0000)*8*4 + n*4
最终地址 = SRAM位带别名区起始地址 + (A - SRAM位带区起始地址) *32 + 位序号*4
~~~

>**A**：表示我们要操作的那个位所在的寄存器地址
>
>**n**：位序号，即寄存器中对应的位的序号
>
>**位带区的一个位在位带别名会被膨胀成四个字（即半个字节）**

## 3.位带操作的优点

### （1）控制GPIO口输入输出非常简单

### （2）操作串行接口芯片非常方便

### （3）代码简洁，阅读方便