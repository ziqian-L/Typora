# 八股文系列——存储器

好，又来到了新的一期八股文，这一期我们来复习一下存储器。



这一期直接读稿和看稿了，写的话很浪费时间。



好，我们直接开始。



存储器是一个很大的概念，它负责存储和管理计算机的数据和程序。



我们讲重点，从计算机的内部往外走就是



**CPU-->寄存器-->Cache高速缓存-->内存-->外存**



----------------



## 引入

首先，CPU是计算机的核心，负责执行各种指令，它通过寄存器来完成数据的读取和处理。



寄存器是一种高速缓存，位于CPU内部，其速度比其他存储器更快。



CPU使用寄存器来存储计算过程中的中间结果，以及一些必要的数据，这样可以大大提高计算速度。



接下来，我们来讲高速缓存Cache。



高速缓存是位于CPU和内存之间的一种存储器，其作用是**缓存经常被访问的数据**，以便快速访问。



高速缓存的速度比内存快得多，它可以极大地提高计算机的性能。



目前，计算机中广泛使用的高速缓存有L1、L2和L3三级，它们的速度和容量逐级递减。





然后是内存，内存是计算机中常用的一种存储器，它用来存储程序和数据。



分为RAM和ROM。随着计算机的发展，内存的容量和速度也得到了极大的提高。



内存主要分为DRAM和SRAM两种类型，DRAM是一种动态存储器，它的速度比SRAM慢，但容量更大，价格更便宜。



SRAM是一种静态存储器，速度比DRAM快，但容量更小，价格更昂贵。



接下来是外存，外存是指位于计算机外部的存储器，如硬盘、光盘、闪存等。



外存的容量很大，但速度相对较慢。



目前，计算机中使用最广泛的外存是硬盘和闪存。



光盘就是利用激光原理去读写数据的，我们暂且先不去了解，先来看看硬盘。



---------------

## 硬盘SSD&HDD

硬盘又分为固态硬盘（SSD）和机械硬盘（HDD），其中固态硬盘SSD内部就是由闪存实现的。





让我们简单的对比一下二者：

| 区别/分类 | SSD固态硬盘                                    | HDD机械硬盘                                                  |
| --------- | ---------------------------------------------- | ------------------------------------------------------------ |
| 工作器件  | 闪存存储器                                     | 盘片、磁头和机械臂                                           |
| 工作原理  | 在二极管和晶体管之间的介质中存储电荷来存储数据 | 将数据通过磁头读写到盘片上，在磁性表面上留下磁场以存储数据。 |
| 读写速度  | 更快                                           | 较慢                                                         |
| 容量      | 较小，但是不断更加                             | 更大                                                         |
| 寿命      | 较HDD短                                        | 较长                                                         |
| 价格      | 闪存成本高                                     | 较低                                                         |
| 应用场景  | 更快速度和性能需求的场合                       | 更大容量和低成本的场合，数据存储备份                         |
| 噪音      | 小                                             | 大                                                           |                                                            



-----------------

## 闪存Flash

看完硬盘，我们再看看闪存这玩意：



在1984年，日本东芝公司首先推出了一种新型存储器芯片，称为“闪存”（Flash）

闪存——非易失性存储设备，断电数据不丢失

它能做成什么？——USB闪存驱动器，SD卡，还有我们上面提到的SSD固态硬盘；

工作原理——存储电荷，在二极管和晶体管之间的介质中存储电荷

工作原理——擦除是整块都擦除，即整个块区都设置为逻辑1；编程就是电荷被存储，设置逻辑0；

特点——掉电不丢失，较快读取速度，可靠性高，低功耗



其中Flash主要分为NAND Flash和NOR Flash。



- NAND Flash 是 “NOT AND Flash”的意思，内部大量串联非门电路，所以存储密度高，读写速度快。闪存卡，SSD一般采用这种；最初是为了解决闪存卡容量问题而提出的。（页式管理）

- NOR Flash 是“NOT OR Flash”的意思，内部大量并联非门电路，所以可以实现较快速的读写，嵌入式系统常用以及DSP等；最初是替代EPROM和EEPROM问题提出的。



下面是二者更具体的区别：



需要提一嘴：

XIP是=="eXecute-In-Place"==的缩写，意思是在存储器中直接执行程序，而不需要将程序先加载到RAM中。XIP技术可以使系统在启动时加快启动速度，减少对RAM的占用，提高存储器的利用效率。

| 区别/分类 | NOR FLASH              | NAND FLASH           |
| --------- | ---------------------- | -------------------- |
| 读        | 快，像SRAM一样随机访问 | 快，由严格时序要求   |
| 写        | 慢，写之前需要擦除     | 快，写之前需要擦除   |
| 擦除      | 慢（5s）               | 快（3ms）            |
| XIP       | 可以                   | 不能                 |
| 可靠性    | 比较高                 | 比较低，位反转较常见 |
| 接口      | 与RAM相同              | I/O接口              |
| 容量      | 小                     | 大                   |
| 价格      | 高                     | 低                   |

此表摘自 “仲一大佬的嵌入式软件开发笔试面试指南硬件基础部分”





-----------

## RAM



接下来，Flash的前身是什么？更准确的来说NOT OR Flash的前身是什么？是EEPROM！也就是ROM。



但讲到ROM就得一起提到RAM了！



我们先看看RAM（Random Access Memory，随机存取存储器）：



RAM是一种随机访问存储器，它可以随时读写数据。



RAM可以分为静态RAM（SRAM）和动态RAM（DRAM）。



SRAM使用触发器作为存储单元，速度非常快，但价格较高。



DRAM使用电容作为存储单元，速度相对较慢，但价格更便宜，容量更大。



分类也就是发展顺序：

- 磁芯存储器（Magnetic Core Memory）：磁芯存储器是早期计算机使用的一种存储器，它由许多细小的磁铁芯组成，每个芯代表一个二进制数。由于其结构简单、易于制造和可靠性高，因此在20世纪50年代到60年代被广泛使用，但容量相对较小，速度也不够快。

- 芯片DRAM（Dynamic RAM）：芯片DRAM是20世纪70年代中期开始出现的一种新型RAM，它使用MOS技术制造，具有容量大、体积小、速度快等特点。DRAM通过电容存储数据，因此需要定期刷新以避免数据丢失，这也是其名字中“动态”的由来。DRAM在计算机存储器中得到广泛应用，也是目前主流计算机存储器的主要组成部分。（==栅极电容==）

- 静态RAM（SRAM）：静态RAM是一种比DRAM更快、更稳定的存储器，它不需要定期刷新数据，因此速度更快，同时也比DRAM更耗费功率。SRAM使用了更复杂的电路设计和更多的晶体管，因此容量相对较小，价格也较高，主要用于需要高速缓存的场合。（==双稳态触发器==）（Cache高速缓存）

- 高速DRAM（SDRAM）：高速DRAM是在DRAM基础上发展出的一种新型DRAM，具有更高的速度和更低的功耗，主要用于桌面计算机和服务器等高性能计算场合。（==同步时钟来控制数据读写的DRAM==）

- DDR SDRAM（==Double== Data Rate Synchronous Dynamic Random Access Memory）：DDR SDRAM是一种双倍速的SDRAM，可以在每个时钟周期内（==时钟信号的上升沿和下降沿==）进行两次数据传输，因此速度比SDRAM更快。DDR SDRAM经过多次升级，发展到DDR4和DDR5等版本，已成为目前主流计算机存储器的主要形式。



-----------

## ROM

讲完RAM，现在讲ROM：



ROM（Read-Only Memory）是一种只读存储器，其中的数据一旦被写入，就无法更改。



看这个名字，就可以看出来，其实ROM最初设计是只能读，写要一出场就初始化的并且不能更改的！



但是后面发展就变味了hh，科技树点歪了。



- ROM（==Read-Only Memory==）（只读存储器）：ROM最早出现在20世纪60年代。在这个时期，ROM主要被用于存储程序和数据，用于计算机、电视游戏机等电子产品中。ROM可以固化存储器的内容，因此在安全性和稳定性方面具有优势。但ROM的容量较小，且不可修改，因此只适用于存储少量固定数据。

- PROM（==Programmable Read-Only Memory==）（可编程只读存储器）：PROM出现在20世纪70年代。PROM与ROM类似，都是在制造时写入数据，但是PROM在使用时可以被编程修改。用户可以通过特殊的编程设备将数据写入PROM中，但一旦编程之后，数据就不可更改。

- EPROM（==Erasable Programmable Read-Only Memory==）（可擦除可编程只读存储器）：EPROM出现在20世纪80年代。EPROM和PROM的区别在于EPROM可以被擦除和重新编程，而PROM只能被编程一次。EPROM的擦除是通过使用==紫外线照射EPROM芯片的晶体管==来实现的，因此擦除需要将EPROM芯片从设备中取出。EPROM的容量比PROM大，但擦除和重新编程需要一定的成本和时间。

- EEPROM（==Electrically Erasable Programmable Read-Only Memory==）（电可擦除可编程只读存储器）：EEPROM出现在20世纪90年代（==Intel公司==）推出。EEPROM与EPROM的区别在于擦除时不需要使用紫外线，而是通过电压来实现（==电擦除==），因此可以在设备中进行擦除和重新编程。EEPROM可以反复擦除和编程，也可以单独擦除或编程，而不必像EPROM一样将整个芯片擦除。EEPROM的容量比EPROM小，但是具有更高的可编程性和可擦除性。

- Flash存储器：Flash上面讲了，这里就不赘述了。





好了，基本到现在，存储器大概方向讲完了，现在来看几道经典题目：

1. ==RAM和ROM的区别？==

   | 特点/分类 | RAM            | ROM                                            |
   | --------- | -------------- | ---------------------------------------------- |
   | 定义      | 随机存取存储器 | 只读存储器                                     |
   | 存储数据  | 临时存储数据   | 永久性存储数据                                 |
   | 读写速度  | 非常快         | 相对较慢                                       |
   | 掉电丢失  | 是             | 否                                             |
   | 具体分类  | SRAM和DRAM     | PROM，EPROM，EEPROM，Flash                     |
   | 重写次数  | 可以重复读写   | 开始设计为只能写入一次，但是现在也可以重复读写 |
   | 容量      | 小             | 大                                             |
   | 应用场景  | 频繁读写       | 程序代码和数据                                 |

   。。。

   

2. ==FLASH和RAM的区别？==

- 存储方式：FLASH是非易失性存储器，即断电后仍能保持存储数据，而RAM是易失性存储器，需要连续供电才能保持数据。这意味着，当计算机关闭时，RAM存储的数据将被清除，而FLASH中存储的数据将被保留下来。
- 读写速度：RAM通常比FLASH速度更快，因为RAM可以随时读写存储的数据，而FLASH的读写速度相对较慢。
- 容量：FLASH的存储容量通常比RAM大，因此它更适合于存储大量的数据，例如操作系统、应用程序等。RAM的容量相对较小，因此它更适合于存储短期的临时数据，例如程序的变量和运行时状态等。
- 成本：FLASH的成本通常比RAM高，因为它需要更多的电路和技术支持来实现非易失性存储。相比之下，RAM的成本较低，因为它只需要支持易失性存储即可。

​	。。。



3. ==EEPROM和FLASH的区别？==

- 擦除方式：EEPROM使用电场擦除，FLASH使用高电压擦除。EEPROM的擦除速度较慢，但是可以精确擦除单个字节或单个字，而FLASH的擦除速度较快，但是只能擦除一整个块（==扇区sector==）（通常为4KB或64KB）。
- 编程方式：EEPROM可以通过写入电荷或电压来编程单个字节或单个字，而FLASH则必须在块的基础上编程，因此编程速度比EEPROM慢。
- 容量：FLASH的容量通常比EEPROM大。
- 使用场景：由于EEPROM的编程速度较快，因此适用于小容量数据的存储和应用，如嵌入式系统中的配置数据和参数；而FLASH则更适合于需要大容量数据存储和较快读写速度的应用，如固态硬盘、闪存卡、数字相机等。
- 使用寿命：EEPROM的读写寿命相对于Flash更长，因为EEPROM可以进行单独的擦除和编程，而不需要整个扇区的操作。

​      。。。



4. ==NAND Flash和NOR Flash的区别？==

​		回看即可。





然后再看看最开始的这个流程：

**CPU-->寄存器-->Cache高速缓存-->内存-->外存**

对里面的存储器应该有了个初步的了解





这就是今天的这一期存储器系列的八股文，谢谢各位。
