## 一、中断优先级管理

（1）简介NVIC（参考资料：芯片数据手册Page117、技术手册Page82）

- 等级越低，中断优先级越高
- 支持动态调整优先级
- 优先级分为组优先级和子优先级，其中子优先级（硬件优先级）是不变的。

系统有两个中断，中断A和中断B，中断号分别为1和2。当不进行中断优先级配置时，组优先级一致，中断号即为中断优先级，中断号小的中断优先级高，所以中断优先级为A>B。假如此时系统正在执行中断B，而中断A发生了，系统会如何处理呢？因为它们组优先级一样，故中断A不能打断中断B，系统会先挂起中断A，待中断B执行完后，再执行中断A；
倘若将中断A的组优先级设置为1，中断B的组优先级设置为2，此时系统正在执行中断B，而中断A发生了，系统会如何处理呢？因为组优先级小的优先级高，所以中断优先级是A>B，故系统打断中断B，执行中断A，待中断A执行完后，再继续执行中断B。

（2）相关库函数

> 设置组优先级：
>
> > Interrupt_setPriority(interruptNumber, level);
> >
> > level : x<<5 , x∈[0,7]
> > 只使用高3位,配置时得左移5位

## 二、软件挂起中断和屏蔽中断优先级

>软件挂起中断：
>
>> Interrupt_pendInterrupt(interruptNumber);
>
>屏蔽中断优先级：
>
>> Interrupt_setPriorityMask(level);
>>
>> 填上等级，大于或等于这个等级的中断都会被屏蔽，0是关闭屏蔽

